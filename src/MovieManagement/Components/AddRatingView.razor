@inject AuthenticationStateProvider AuthenticationStateProvider
@inject IRatingService RatingService
@inject IMovieService MovieService

<AuthorizeView Context="authContext">
    <Authorized>
        <div class="rating-wrapper">
            <h4>Rate the movie</h4>
            <EditForm Model="ratingViewModel" Context="editContext" OnValidSubmit="RateMovieAsync">
                <DataAnnotationsValidator />
                <div class="ratings">
                    @for (var i = 1; i < 11; i++)
                    {
                        var rating = i;
                        <span class="oi oi-star rating @IsActive(rating)" @onclick="(() => SetRating(rating))" />
                    }
                </div>
                <InputTextArea class="form-control" @bind-Value="ratingViewModel.Review" />
                <button class="btn btn-primary">Rate movie</button>
                <ValidationSummary />
            </EditForm>
            <p class="mt-2 @resultCssClass">@resultMessage</p>
        </div>
    </Authorized>
</AuthorizeView>